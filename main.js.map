{"version":3,"sources":["./src/app/export/export.component.ts","./src/app/export/export.component.html","./src/environments/environment.ts","./src/app/services/stats/pca.service.ts","./src/app/pca-scatter/pca-scatter.component.ts","./src/app/pca-scatter/pca-scatter.component.html","./src/app/tagify/angular-tagify.component.ts","./node_modules/moment/locale sync ^\\.\\/.*$","./src/app/app.component.ts","./src/app/app.component.html","./src/app/stats/stats.component.ts","./src/app/stats/stats.component.html","./src/app/tagify/angular-tagify.service.ts","./src/app/stats-details/stats-details.component.ts","./src/app/stats-details/stats-details.component.html","./src/app/services/firebase.service.ts","./src/app/app.module.ts","./src/app/pca-timeseries/pca-timeseries.component.ts","./src/app/pca-timeseries/pca-timeseries.component.html","./src/app/list/list.component.ts","./src/app/list/list.component.html","./src/app/form/form.component.ts","./src/app/form/form.component.html","./src/app/app-routing.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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W,GAAG;kBAAZ,oDAAM;YACG,MAAM;kBAAf,oDAAM;YACE,QAAQ;kBAAhB,mDAAK;YACG,KAAK;kBAAb,mDAAK;YAEuB,cAAc;kBAA1C,uDAAS;mBAAC,gBAAgB;;;;;;;;;;;;;AC5E7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"main.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\n\nimport { csvFormat } from 'd3-dsv';\nimport * as JSZip from 'jszip';\nimport { saveAs } from 'file-saver';\n\nimport { FirebaseService, Entry } from '../services/firebase.service';\n\n@Component({\n  selector: 'app-export',\n  templateUrl: './export.component.html',\n  styleUrls: ['./export.component.css'],\n})\nexport class ExportComponent implements OnInit {\n  constructor(private fb: FirebaseService) {}\n\n  ngOnInit(): void {}\n\n  async export(): Promise<void> {\n    this.fb.db\n      .collection('entries')\n      .valueChanges()\n      .subscribe((entries: Entry[]) => {\n        this._exportAndDownload(entries);\n      });\n  }\n\n  async _exportAndDownload(entries: Entry[]): Promise<void> {\n    const zip = new JSZip();\n\n    zip.file('emotions.csv', this.generateEmotionCsv(entries));\n    zip.file('activities.csv', this.generateActivityCsv(entries));\n\n    zip.generateAsync({ type: 'blob' }).then((blob) => {\n      console.log(blob);\n      const now = new Date();\n      saveAs(\n        blob,\n        `mood-analysis_${now.getFullYear()}-${(now.getMonth() + 1)\n          .toString()\n          .padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}.zip`,\n      );\n    });\n  }\n\n  /**\n   * Generate long emotion dataframe in CSV format.\n   */\n  generateEmotionCsv(entries: Entry[]): string {\n    const rows = entries.flatMap((en) => {\n      return Object.entries(en.emotions).map(([em, value]) => ({\n        datetime: en.createdAt?.toDate(),\n        emotion: em,\n        value: value,\n      }));\n    });\n\n    return csvFormat(rows);\n  }\n\n  /**\n   * Generate long activity dataframe in CSV format.\n   */\n  generateActivityCsv(entries: Entry[]): string {\n    const rows = entries.flatMap((en) => {\n      return (\n        en.activities\n          ?.map((act) =>\n            act.length > 0\n              ? {\n                  datetime: en.createdAt?.toDate(),\n                  activity: act,\n                }\n              : null,\n          )\n          .filter((x) => !!x) || []\n      );\n    });\n\n    return csvFormat(rows);\n  }\n}\n","<button (click)=\"export()\">Export</button>\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n\n  // TODO don't store here ..\n  firebase: {\n    apiKey: 'AIzaSyAW_6zYywvUy67RXZwGiMZ3R_jsSykygmc',\n    authDomain: 'mood-85e71.firebaseapp.com',\n    projectId: 'mood-85e71',\n    storageBucket: 'mood-85e71.appspot.com',\n    messagingSenderId: '81154981835',\n    appId: '1:81154981835:web:712f625042460cd47b004e',\n  },\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Injectable } from '@angular/core';\n\nimport * as firestore from '@angular/fire/firestore';\nimport { Timestamp } from '@firebase/firestore-types';\nimport * as _ from 'lodash';\n\nimport { Matrix } from 'ml-matrix';\nimport { PCA } from 'ml-pca';\n\nimport { Entry, Stat, FirebaseService } from '../firebase.service';\n\nexport interface PCARecord {\n  // Mapping from emotion index to emotion string\n  emotions: string[];\n  involvedEntries: firestore.DocumentReference<Entry>[];\n\n  // Parameters\n  // Eigenvectors as 1D array\n  eigenvectors: number[];\n  eigenvalues: number[];\n\n  // Other views\n  // Dimension loadings as 1D array\n  loadings: number[];\n  explainedVariance: number[];\n\n  // 1D array form of projected data\n  projectedData: number[];\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PCAService {\n  constructor(private fb: FirebaseService) {}\n\n  async run(): Promise<Stat> {\n    // TODO find relevant emotion subset. For now we'll just use all the\n    // emotions and drop entries missing emotions. Ignore Daylio \"happiness\" emotion.\n    return new Promise((resolve, reject) => {\n      this.fb.db\n        .collection('entries')\n        .snapshotChanges()\n        .subscribe(\n          (entrySnapshots: firestore.DocumentChangeAction<Entry>[]) => {\n            const allEmotions = new Set(\n              entrySnapshots.flatMap((e) =>\n                Object.keys(e.payload.doc.data().emotions),\n              ),\n            );\n            // Delete Daylio emotions\n            allEmotions.delete('happiness');\n\n            const compatibleEntries = entrySnapshots.filter((e) =>\n              _.isEqual(\n                new Set(Object.keys(e.payload.doc.data().emotions)),\n                allEmotions,\n              ),\n            );\n\n            const emotions = [...allEmotions];\n\n            // Construct data matrix.\n            // TODO normalize\n            const data = new Matrix(\n              compatibleEntries.map((entry) =>\n                emotions.map((em) => entry.payload.doc.data().emotions[em]),\n              ),\n            );\n\n            const pca = new PCA(data, { center: true }),\n              record: PCARecord = {\n                emotions: emotions,\n                involvedEntries: compatibleEntries.map(\n                  (e) =>\n                    e.payload.doc.ref as firestore.DocumentReference<Entry>,\n                ),\n\n                eigenvectors: pca.getEigenvectors().to1DArray(),\n                eigenvalues: pca.getEigenvalues(),\n\n                loadings: pca.getLoadings().to1DArray(),\n                explainedVariance: pca.getExplainedVariance(),\n\n                projectedData: pca.predict(data).to1DArray(),\n              };\n\n            // Compute per-entry stats (projected values)\n            // TODO configurable\n            const truncatedProjection = pca\n              .predict(data)\n              .subMatrixColumn([0, 1]);\n            const entryStats = Object.fromEntries(\n              _.zip(\n                compatibleEntries.map((e) => e.payload.doc.id),\n                truncatedProjection.to2DArray(),\n              ),\n            );\n\n            const stat = {\n              type: 'pca',\n              createdAt: this.fb.now(),\n              data: record,\n            };\n            this.fb.addStat(stat, entryStats).then((stat) => resolve(stat));\n          },\n        );\n    });\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\n\nimport { Chart, ChartDataSets, ChartOptions, TimeUnit } from 'chart.js';\nimport * as pluginZoom from 'chartjs-plugin-zoom';\nimport { Color, Label } from 'ng2-charts';\n\nimport Matrix from 'ml-matrix';\n\nimport { Entry, Stat } from '../services/firebase.service';\nimport { PCARecord } from '../services/stats/pca.service';\n\n@Component({\n  selector: 'app-pca-scatter',\n  templateUrl: './pca-scatter.component.html',\n  styleUrls: ['./pca-scatter.component.css'],\n})\nexport class PcaScatterComponent implements OnInit {\n  @Input() record: PCARecord;\n  chartData: ChartDataSets[];\n\n  constructor() {}\n\n  ngOnInit(): void {\n    Chart.pluginService.register(pluginZoom);\n\n    this.chartData = this._chartData();\n  }\n\n  public chartOptions: ChartOptions = {\n    responsive: true,\n    tooltips: {\n      enabled: true,\n      intersect: false,\n    },\n    scales: {\n      // xAxes: [\n      //   {\n      //     type: 'time',\n      //     time: {\n      //       unit: <TimeUnit>'day',\n      //       displayFormats: {\n      //         day: 'MMM D',\n      //       }\n      //     }\n      //   }\n      // ],\n      // yAxes: [\n      //   {\n      //     ticks: {\n      //       min: -1,\n      //       max: 1\n      //     }\n      //   }\n      // ]\n    },\n    plugins: {\n      zoom: {\n        pan: {\n          enabled: true,\n          mode: 'x',\n        },\n        zoom: {\n          enabled: true,\n        },\n      },\n    },\n  };\n\n  _chartData(): ChartDataSets[] {\n    const pcaLoadings = Matrix.from1DArray(\n      this.record.emotions.length,\n      this.record.eigenvalues.length,\n      this.record.loadings,\n    );\n    const data = pcaLoadings.to2DArray().map((el) => ({ x: el[0], y: el[1] }));\n    return [{ data: data, label: 'A' }];\n  }\n\n  // public chartColors: Color[] = [\n  //   { borderColor: 'black', backgroundColor: 'rgba(255, 0, 0, 0.3)' }\n  // ];\n\n  // get chartData(): ChartDataSets[] {\n  //   let pcaData = Matrix.from1DArray(\n  //     this.record.involvedEntries.length,\n  //     this.record.emotions.length,\n  //     this.record.projectedData);\n  //\n  //   const dataset = _.zip(this.entries, pcaData.to2DArray()).map(el => {\n  //     const [entry, vector] = el;\n  //     return {x: (<any>entry.createdAt).toDate(), y: vector[0]};\n  //   });\n  //\n  //   const sortedData = _.orderBy(dataset, el => el.x);\n  //\n  //   return [\n  //     {data: sortedData, label: 'PCA 1'}\n  //   ];\n  // }\n}\n","<div id=\"chart-pca-scatter\">\n  <canvas baseChart\n    [datasets]=\"chartData\"\n    [options]=\"chartOptions\"\n    chartType=\"scatter\">\n  </canvas>\n</div>\n","import {\n  AfterViewInit,\n  Component,\n  EventEmitter,\n  forwardRef,\n  Input,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport * as Tagify from '@yaireo/tagify';\nimport { TagifyService } from './angular-tagify.service';\n\nexport interface SettingsModel {\n  placeholder?: string;\n  delimiters?: string;\n  pattern?: string | RegExp;\n  mode?: string;\n  mixTagsInterpolator?: string[];\n  mixTagsAllowedAfter?: RegExp;\n  duplicates?: boolean;\n  enforceWhitelist?: boolean;\n  autoComplete?: {\n    enabled?: boolean;\n    rightKey?: boolean;\n  };\n  whitelist?: string[] | Object[];\n  blacklist?: string[] | Object[];\n  addTagOnBlur?: boolean;\n  callbacks?: Object;\n  maxTags?: number;\n  editTags?: number;\n  templates?: {\n    wrapper?: Function;\n    tag?: Function;\n    dropdownItem?: Function;\n    dropdownItemNoMatch?: Function;\n  };\n  transformTag?: Function;\n  keepInvalidTags?: boolean;\n  skipInvalid?: boolean;\n  backspace?: any;\n  originalInputValueFormat?: Function;\n  dropdown?: {\n    enabled?: number | false;\n    caseSensitive?: boolean;\n    maxItems?: number;\n    classname?: string;\n    fuzzySearch?: boolean;\n    accentedSearch?: boolean;\n    position?: string;\n    highlightFirst?: boolean;\n    closeOnSelect?: boolean;\n    mapValueTo?: string | Function;\n    searchKeys?: string[];\n    appendTarget?: any;\n  };\n}\n\n@Component({\n  selector: 'tagify',\n  template: `<input *ngIf=\"settings\" #tagifyInputRef />`,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TagifyComponent),\n      multi: true,\n    },\n  ],\n})\nexport class TagifyComponent implements AfterViewInit, ControlValueAccessor {\n  @Output() add = new EventEmitter(); // returns the added tag + updated tags list\n  @Output() remove = new EventEmitter(); // returns the updated tags list\n  @Input() settings: SettingsModel; // get possible tagify settings\n  @Input() value: string | Array<string>;\n\n  @ViewChild('tagifyInputRef') tagifyInputRef: any;\n\n  private onChange: any = null;\n  private onTouched: any = null;\n\n  constructor(private tagifyService: TagifyService) {}\n  private tagify;\n\n  ngAfterViewInit() {\n    if (!this.settings) {\n      return;\n    }\n    this.settings.callbacks = {\n      add: () => {\n        this.add.emit({\n          tags: this.tagify.value,\n          added: this.tagify.value[this.tagify.value.length - 1],\n        });\n\n        if (this.onChange !== null) this.onChange(this.tagify.value);\n      },\n      remove: () => {\n        this.remove.emit(this.tagify.value);\n\n        if (this.onChange !== null) this.onChange(this.tagify.value);\n      },\n    };\n\n    this.tagify = this.tagifyService.getTagifyRef(\n      this.tagifyInputRef.nativeElement,\n      this.settings,\n    );\n\n    if (this.value) {\n      const value = this.value;\n      setTimeout(() => this.addTags(value));\n    }\n  }\n\n  ngOnChanges({ value }) {\n    if (!this.tagify) return;\n    if (!value.previousValue) {\n      this.tagify.loadOriginalValues(value.currentValue);\n    }\n  }\n\n  /**\n   * @description removes all tags\n   */\n  removeAll() {\n    this.tagify.removeAllTags();\n  }\n\n  /**\n   * @description add multiple tags\n   */\n  addTags(tags) {\n    this.tagify.addTags(tags);\n  }\n\n  /**\n   * @description destroy dom and everything\n   */\n  destroy() {\n    this.tagify.destroy();\n  }\n\n  writeValue(value) {\n    if (value == null) return;\n    this.value = value;\n\n    if (!this.tagify)\n      // Not yet rendered.\n      return;\n\n    this.removeAll();\n    this.addTags(value as string[]);\n  }\n\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n}\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn-bd\": \"loYQ\",\n\t\"./bn-bd.js\": \"loYQ\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-mx\": \"tbfe\",\n\t\"./es-mx.js\": \"tbfe\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","import { Component } from '@angular/core';\n\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport firebase from 'firebase/app';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent {\n  title = 'app';\n\n  constructor(public auth: AngularFireAuth) {}\n\n  login() {\n    this.auth\n      .signInWithPopup(new firebase.auth.GoogleAuthProvider())\n      .then((c) => console.log(c));\n  }\n\n  logout() {\n    this.auth.signOut();\n  }\n}\n","<mat-sidenav-container class=\"example-container\">\n  <mat-sidenav mode=\"side\" opened>\n    <mat-nav-list>\n      <mat-list-item routerLink=\"/form\" routerLinkActive=\"active-list-item\">Report</mat-list-item>\n      <mat-list-item routerLink=\"/list\" routerLinkActive=\"active-list-item\">List</mat-list-item>\n      <mat-list-item routerLink=\"/stats\" routerLinkActive=\"active-list-item\">Stats</mat-list-item>\n      <mat-list-item routerLink=\"/export\" routerLinkActive=\"active-list-item\">Export</mat-list-item>\n      <mat-list-item (click)=\"login()\">Log in</mat-list-item>\n      <mat-list-item (click)=\"logout()\">Log out</mat-list-item>\n    </mat-nav-list>\n  </mat-sidenav>\n\n  <mat-sidenav-content>\n    <router-outlet></router-outlet>\n  </mat-sidenav-content>\n</mat-sidenav-container>\n","import { Component, OnInit, ViewChild } from '@angular/core';\n\nimport { Stat } from '../services/firebase.service';\nimport { PCAService } from '../services/stats/pca.service';\nimport { StatsDetailsComponent } from '../stats-details/stats-details.component';\n\n@Component({\n  selector: 'app-stats',\n  templateUrl: './stats.component.html',\n  styleUrls: ['./stats.component.css'],\n})\nexport class StatsComponent implements OnInit {\n  @ViewChild(StatsDetailsComponent) details: StatsDetailsComponent;\n\n  constructor(private pca: PCAService) {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  ngOnInit(): void {}\n\n  runPCA(): void {\n    this.pca.run().then((stat: Stat) => {\n      console.log('cb');\n\n      // Reload details component.\n      this.details.id = stat.id;\n    });\n  }\n}\n","<button (click)=\"runPCA()\">Run</button>\n\n<app-stats-details></app-stats-details>\n","import { ElementRef, Injectable } from '@angular/core';\nimport * as Tagify from '@yaireo/tagify';\nimport { SettingsModel } from './angular-tagify.component';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TagifyService {\n  private tagify: Tagify;\n\n  constructor() {}\n\n  /** @description Singleton used by TagifyComponent to a ref to tagify\n   * @returns tagify instance\n   */\n  getTagifyRef(tagifyInputRef: ElementRef, settings: SettingsModel) {\n    if (arguments.length === 0) return;\n    if (this.tagify) return this.tagify;\n    this.tagify = new Tagify(tagifyInputRef, settings);\n    return this.tagify;\n  }\n\n  /**\n   * @description removes all tags\n   */\n  public removeAll() {\n    this.tagify.removeAllTags();\n  }\n\n  /**\n   * @description add multiple tags\n   */\n  public addTags(tags) {\n    this.tagify.addTags(tags);\n  }\n\n  /**\n   * @description destroy dom and everything\n   */\n  public destroy() {\n    this.tagify.destroy();\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport * as _ from 'lodash';\nimport { first } from 'rxjs/operators';\n\nimport { Entry, FirebaseService, Stat } from '../services/firebase.service';\nimport { PCARecord } from '../services/stats/pca.service';\n\n@Component({\n  selector: 'app-stats-details',\n  templateUrl: './stats-details.component.html',\n  styleUrls: ['./stats-details.component.css'],\n})\nexport class StatsDetailsComponent implements OnInit {\n  @Input() id: string;\n\n  stat: Stat;\n\n  pcaRecord?: PCARecord;\n  entries: Entry[];\n\n  numComponents = 2;\n  statCreated: Date;\n  firstEntryDate: Date;\n  lastEntryDate: Date;\n  explainedVariance: number[];\n  totalExplainedVariance: number;\n\n  chartReady = false;\n\n  constructor(private route: ActivatedRoute, private fb: FirebaseService) {}\n\n  async ngOnInit(): Promise<void> {\n    if (!this.id) {\n      if (this.route.snapshot.params.id) {\n        this.id = this.route.snapshot.params.id;\n      } else {\n        // Get most recent analysis.\n        const query = this.fb.db.collection('stats', (ref) =>\n          ref.orderBy('createdAt', 'desc').limit(1),\n        );\n        const statSnapshot = await query\n          .snapshotChanges()\n          .pipe(first())\n          .toPromise();\n        if (!statSnapshot) {\n          // TODO handle no stats\n        }\n\n        this.id = statSnapshot[0].payload.doc.id;\n        this.stat = statSnapshot[0].payload.doc.data() as Stat;\n      }\n    }\n\n    if (!this.stat) {\n      this.stat = (await this.fb.db\n        .collection('stats')\n        .doc(this.id)\n        .valueChanges()\n        .pipe(first())\n        .toPromise()) as Stat;\n    }\n\n    this.reload();\n  }\n\n  async reload(): Promise<void> {\n    // TODO assumes PCA stats\n    this.pcaRecord = this.stat.data as PCARecord;\n\n    // Load associated entries.\n    this.entries = await Promise.all(\n      this.pcaRecord.involvedEntries.map((ref) =>\n        ref.get().then((r) => r.data()),\n      ),\n    );\n\n    console.log(this.stat.createdAt);\n    this.firstEntryDate = _.min(this.entries.map((e) => e.createdAt.toDate()));\n    this.lastEntryDate = _.max(this.entries.map((e) => e.createdAt.toDate()));\n    this.explainedVariance = _.take(\n      this.pcaRecord.explainedVariance,\n      this.numComponents,\n    ).map((v) => v * 100);\n    this.totalExplainedVariance = _.sum(this.explainedVariance);\n\n    this.chartReady = true;\n  }\n\n  // renderChart() {\n  //   const width = 400, height = 400;\n  //   const margin = {top: 20, right: 80, bottom: 30, left: 150};\n  //   const data = this.chartData.sort((a, b) => a.datetime.getTime() - b.datetime.getTime());\n  //\n  //   let svg = d3.select(\"#chart\").append(\"svg\")\n  //     .attr(\"id\", \"chart-pca\")\n  //     .attr(\"width\", width + margin.left + margin.right)\n  //     .attr(\"height\", height + margin.top + margin.bottom)\n  //\n  //   let g = svg.append(\"g\")\n  //     .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n  //\n  //   console.log(data);\n  //   let x = d3.scaleTime()\n  //     .domain(d3.extent(data, (d) => d.datetime))\n  //     .range([0, width]);\n  //\n  //   let y = d3.scaleLinear()\n  //     .domain(d3.extent(data, (d) => d.y))\n  //     .range([0, height]);\n  //\n  //   // Axes\n  //\n  //   const xAxis = d3.axisBottom(x).tickFormat(d3.timeFormat(\"%m-%d\"));\n  //   const yAxis = d3.axisLeft(y);\n  //\n  //   g.append(\"g\")\n  //     .call(yAxis)\n  //     .append(\"text\")\n  //     .attr(\"transform\", \"rotate(-90)\")\n  //     .style(\"text-anchor\", \"end\")\n  //     .text(\"PCA dim 1\");\n  //\n  //   g.append(\"g\")\n  //     .attr(\"class\", \"x axis\")\n  //     .attr(\"transform\", `translate(0, ${height})`)\n  //     .call(xAxis);\n  //\n  //   // X grid lines\n  //   g.append(\"g\")\n  //     .attr(\"class\", \"grid\")\n  //     .attr(\"transform\", `translate(0, ${height})`)\n  //     .call(d3.axisBottom(x).ticks(5).tickSize(-height).tickFormat(<null>\"\"))\n  //\n  //   // Y grid lines\n  //   g.append(\"g\")\n  //     .attr(\"class\", \"grid\")\n  //     .call(d3.axisLeft(y).ticks(5).tickSize(-width).tickFormat(<null>\"\"))\n  //\n  //   let line = g.append(\"path\")\n  //     .datum(data)\n  //     .attr(\"class\", \"line\")\n  //     .attr(\"d\", <any>d3.line()\n  //       .x(d => x((d as unknown as ChartDataItem).datetime))\n  //       .y(d => y((d as unknown as ChartDataItem).y)));\n  //\n  //   // Overlay for catching mouseover\n  //   g.append(\"rect\")\n  //     .attr(\"class\", \"overlay\")\n  //     .attr(\"width\", width)\n  //     .attr(\"height\", height)\n  //     .on(\"mousemove\", mousemove);\n  //\n  //   function mousemove() {\n  //     //const x0 = x.invert(d3.pointer(this)[0]);\n  //     console.log(d3.pointer(this));\n  //   }\n\n  // nv.addGraph(() => {\n  //   var chart = nv.models.lineChart();\n  //\n  //   chart.xAxis\n  //     .axisLabel(\"Date\");\n  //\n  //   chart.yAxis\n  //     .axisLabel(\"PCA 1\");\n  //\n  //   d3.select(\"#chart svg\")\n  //     .datum(this.chartData)\n  //     .call(chart);\n  //\n  //   return chart;\n  // })\n  // }\n}\n","<div *ngIf=\"chartReady\">\n  <ul class=\"stats-details\">\n    <li><strong>Created at:</strong> {{stat.createdAt.toDate() | date: 'yyyy-MM-dd HH:mm'}}</li>\n    <li><strong>Involved entries:</strong> {{firstEntryDate | date: 'yyyy-MM-dd HH:mm'}} &mdash; {{lastEntryDate | date: 'yyyy-MM-dd HH:mm'}}</li>\n    <li><strong>Explained variance:</strong> {{explainedVariance.join(\", \")}} (total {{totalExplainedVariance}}%)</li>\n  </ul>\n\n  <app-pca-timeseries [record]=\"pcaRecord\" [entries]=\"entries\" [numComponents]=\"numComponents\"></app-pca-timeseries>\n  <app-pca-scatter [record]=\"pcaRecord\"></app-pca-scatter>\n</div>\n \n","import { Injectable } from '@angular/core';\n\nimport * as firestore from '@angular/fire/firestore';\nimport * as firebase from 'firebase';\nimport { forkJoin, Observable } from 'rxjs';\nimport { first, map, mergeMap, concatAll } from 'rxjs/operators';\n\n// Grr can't get this import to work..\nexport interface Timestamp {\n  toDate(): Date;\n}\n\nexport interface Emotion extends firestore.DocumentData {\n  id?: string;\n  name: string;\n}\nexport interface Activity extends firestore.DocumentData {\n  id?: string;\n  count: number;\n}\nexport interface Entry extends firestore.DocumentData {\n  createdAt: Timestamp;\n  emotions: Record<string, number>;\n  activities: string[];\n}\n\nexport interface Stat extends firestore.DocumentData {\n  createdAt: Timestamp;\n  type: string;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  data: any;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FirebaseService {\n  constructor(public db: firestore.AngularFirestore) {}\n\n  now(): Timestamp {\n    return (firebase.default.firestore.FieldValue.serverTimestamp() as unknown) as Timestamp;\n  }\n\n  get emotions(): Observable<firestore.DocumentChangeAction<Emotion>[]> {\n    return this.db.collection('emotions').snapshotChanges() as Observable<\n      firestore.DocumentChangeAction<Emotion>[]\n    >;\n  }\n\n  get activities(): Observable<firestore.DocumentChangeAction<Activity>[]> {\n    return this.db.collection('activities').snapshotChanges() as Observable<\n      firestore.DocumentChangeAction<Activity>[]\n    >;\n  }\n\n  getFrequentActivities(\n    limit = 20,\n  ): Observable<firestore.DocumentChangeAction<Activity>[]> {\n    return this.db\n      .collection('activities', (ref) =>\n        ref.orderBy('count', 'desc').limit(limit),\n      )\n      .snapshotChanges() as Observable<\n      firestore.DocumentChangeAction<Activity>[]\n    >;\n  }\n\n  getRecentEntries(limit = 50): Observable<Entry[]> {\n    return this.db\n      .collection('entries', (ref) =>\n        ref.orderBy('createdAt', 'desc').limit(limit),\n      )\n      .valueChanges() as Observable<Entry[]>;\n  }\n\n  /**\n   * Get a limited sequence of recent entries, and possibly include stats\n   * information for an analysis with the ID `statsId`.\n   */\n  getRecentEntriesWithStats(\n    limit = 50,\n    statsId: string = null,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): Observable<{ entry: Entry; stats: any }> {\n    const entrySnapshots = this.db\n      .collection('entries', (ref) =>\n        ref.orderBy('createdAt', 'desc').limit(limit),\n      )\n      .snapshotChanges()\n      .pipe(first(), concatAll()) as Observable<\n      firestore.DocumentChangeAction<Entry>\n    >;\n\n    return entrySnapshots.pipe(\n      mergeMap(\n        (entrySnapshot) => {\n          // Get associated stat.\n          return this.db\n            .collection('entries')\n            .doc(entrySnapshot.payload.doc.id)\n            .collection('stats')\n            .doc(statsId)\n            .get()\n            .pipe(map((x) => x.data()));\n        },\n        (entrySnapshot, statDoc) => ({\n          entry: entrySnapshot.payload.doc.data(),\n          stats: statDoc,\n        }),\n      ),\n    );\n  }\n\n  getEntriesById(...ids: string[]): Observable<Entry[]> {\n    return forkJoin(\n      ids.map(\n        (id) =>\n          this.db\n            .collection('entries')\n            .doc(id)\n            .valueChanges() as Observable<Entry>,\n      ),\n    );\n  }\n\n  /**\n   * Retrieve an activity document, creating if necessary.\n   */\n  async getActivity(name: string): Promise<firestore.AngularFirestoreDocument> {\n    const doc = this.db.collection('activities').doc(name);\n\n    const docSnapshot = await doc.get().toPromise();\n    if (!(docSnapshot && docSnapshot.exists)) {\n      // Create the document\n      doc.set({ createdAt: new Date() });\n    }\n\n    return doc;\n  }\n\n  async addEntry(entry: Entry): Promise<void> {\n    // TODO run this in a transaction?\n    // Get documents for each activity\n    entry.activities.forEach((activity: string) => {\n      const activityDoc: firestore.AngularFirestoreDocument<Activity> = this.db\n        .collection('activities')\n        .doc(activity);\n      activityDoc.get().subscribe((doc) => {\n        const count = doc.exists ? doc.data().count || 0 : 0;\n        activityDoc.set({ count: count + 1 }, { merge: true });\n      });\n    });\n\n    this.db.collection('entries').add(entry);\n  }\n\n  /**\n   * Record statistical model results, and optionally propagate data onto entries.\n   *\n   * @param entryData Maps entry document IDs to arbitrary result blobs\n   */\n  async addStat(stat: Stat, entryData?: Record<string, any>): Promise<Stat> {\n    const statRef = await this.db.collection('stats').add(stat);\n    const ret = { ...stat, ...{ id: statRef.id } };\n\n    if (entryData) {\n      const entryStatOps = Object.entries(entryData).map((el) => {\n        const [id, docStats] = el;\n\n        const docUpdate = {};\n        docUpdate[stat.type] = docStats;\n        console.log('docStats', docStats);\n        return this.db\n          .collection('entries')\n          .doc(id)\n          .collection('stats')\n          .doc(statRef.id)\n          .set(docUpdate);\n      });\n\n      await forkJoin(entryStatOps).toPromise();\n    }\n\n    return ret;\n  }\n}\n","import { environment } from '../environments/environment';\n\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTableModule } from '@angular/material/table';\n\nimport { ChartsModule } from 'ng2-charts';\n\nimport { TagifyComponent } from './tagify/angular-tagify.component';\n\nimport { AngularFireModule } from '@angular/fire';\nimport { AngularFireAuthModule } from '@angular/fire/auth';\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\n\nimport { AppRoutingModule } from './app-routing.module';\n\nimport { AppComponent } from './app.component';\nimport { FormComponent } from './form/form.component';\nimport { ListComponent } from './list/list.component';\nimport { StatsComponent } from './stats/stats.component';\nimport { StatsDetailsComponent } from './stats-details/stats-details.component';\nimport { PcaTimeseriesComponent } from './pca-timeseries/pca-timeseries.component';\nimport { PcaScatterComponent } from './pca-scatter/pca-scatter.component';\nimport { ExportComponent } from './export/export.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    FormComponent,\n    TagifyComponent,\n    ListComponent,\n    StatsComponent,\n    StatsDetailsComponent,\n    PcaTimeseriesComponent,\n    PcaScatterComponent,\n    ExportComponent,\n  ],\n  imports: [\n    AngularFireModule.initializeApp(environment.firebase),\n    AngularFireAuthModule,\n    AngularFirestoreModule,\n\n    BrowserModule,\n    FormsModule,\n    ReactiveFormsModule,\n    BrowserAnimationsModule,\n\n    MatFormFieldModule,\n    MatButtonModule,\n    MatInputModule,\n    MatDialogModule,\n    MatSliderModule,\n    MatSidenavModule,\n    MatListModule,\n    MatTableModule,\n\n    ChartsModule,\n\n    AppRoutingModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { Component, OnInit, Input } from '@angular/core';\n\nimport {\n  Chart,\n  ChartPoint,\n  ChartDataSets,\n  ChartOptions,\n  TimeUnit,\n} from 'chart.js';\nimport * as pluginZoom from 'chartjs-plugin-zoom';\nimport { Color } from 'ng2-charts';\n\nimport * as _ from 'lodash';\nimport Matrix from 'ml-matrix';\n\nimport { Entry } from '../services/firebase.service';\nimport { PCARecord } from '../services/stats/pca.service';\n\n@Component({\n  selector: 'app-pca-timeseries',\n  templateUrl: './pca-timeseries.component.html',\n  styleUrls: ['./pca-timeseries.component.css'],\n})\nexport class PcaTimeseriesComponent implements OnInit {\n  @Input() entries: Entry[];\n  @Input() record: PCARecord;\n  @Input() numComponents = 1;\n\n  chartData: ChartDataSets[];\n\n  ngOnInit(): void {\n    Chart.pluginService.register(pluginZoom);\n\n    this.chartData = this._chartData();\n  }\n\n  public chartOptions: ChartOptions = {\n    responsive: true,\n    tooltips: {\n      enabled: true,\n      intersect: false,\n    },\n    scales: {\n      xAxes: [\n        {\n          type: 'time',\n          time: {\n            unit: <TimeUnit>'day',\n            displayFormats: {\n              day: 'MMM D',\n            },\n          },\n        },\n      ],\n      yAxes: [\n        {\n          ticks: {\n            suggestedMin: -2,\n            suggestedMax: 2,\n          },\n        },\n      ],\n    },\n    plugins: {\n      zoom: {\n        pan: {\n          enabled: true,\n          mode: 'x',\n        },\n        zoom: {\n          enabled: true,\n        },\n      },\n    },\n  };\n\n  public chartColors: Color[] = [\n    { borderColor: 'black', backgroundColor: 'rgba(255, 0, 0, 0.3)' },\n  ];\n\n  _chartData(): ChartDataSets[] {\n    const pcaData: number[][] = Matrix.from1DArray(\n      this.record.involvedEntries.length,\n      this.record.emotions.length,\n      this.record.projectedData,\n    ).to2DArray();\n\n    const datasets: ChartDataSets[] = _.range(this.numComponents).map((idx) => {\n      const componentData = _.zip(this.entries, pcaData).map((el) => {\n        const [entry, vector] = el;\n        return { x: (<any>entry.createdAt).toDate(), y: vector[idx] };\n      });\n\n      const dataset = {\n        data: _.orderBy(componentData, (el) => el.x),\n        label: `PCA ${idx + 1}`,\n      };\n\n      return dataset;\n    });\n\n    // Add moving average datasets.\n    // TODO extract magic number\n    const movingAverageDatasets = datasets.map(\n      (dataset) => this.computeMovingAverage(dataset, 1000 * 60 * 60 * 12), // 12 hour step size\n    );\n\n    return datasets.concat(movingAverageDatasets);\n  }\n\n  /**\n   * Compute a moving average of the given dataset over the given time window.\n   * Data points are resampled at the time window / frequency specified by\n   * `window` in millisecond units.\n   */\n  computeMovingAverage(\n    dataset: ChartDataSets,\n    stepSize: number,\n  ): ChartDataSets {\n    const data = _.orderBy(dataset.data as ChartPoint[], (d) => d.x),\n      dates = data.map((d) => d.x as Date),\n      minDate = dates[0],\n      maxDate = dates[dates.length - 1],\n      minTime = minDate.getTime();\n\n    const steps = _.range(minDate.getTime(), maxDate.getTime(), stepSize),\n      buckets: { [bucket: number]: number[] } = _.fromPairs(\n        steps.map((s) => [s, []]),\n      );\n    data.forEach((d) => {\n      const bucket =\n        Math.floor(((<Date>d.x).getTime() - minTime) / stepSize) * stepSize +\n        minTime;\n      buckets[bucket].push(<number>d.y);\n    });\n\n    const avgData = Object.entries(buckets).map((el) => {\n      const [bucket, values] = el;\n      return {\n        x: new Date(Number(bucket)),\n        y: _.mean(values),\n      };\n    });\n\n    const avgDataset = {\n      label: `${dataset.label} moving average`,\n      data: avgData as ChartPoint[],\n    };\n\n    return avgDataset;\n  }\n}\n","<div id=\"chart-pca\">\n  <canvas baseChart\n    [datasets]=\"chartData\"\n    [options]=\"chartOptions\"\n    chartType=\"line\">\n  </canvas>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Entry, FirebaseService } from '../services/firebase.service';\n\nimport { forkJoin } from 'rxjs';\nimport { concat, toArray } from 'rxjs/operators';\n\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.css'],\n})\nexport class ListComponent implements OnInit {\n  entryData: { entry: Entry; stats: any }[];\n  entryStats: [{ pca: [number] }];\n  displayedColumns = ['createdAt', 'pca1', 'activities'];\n\n  // TODO make this configurable\n  activeStat? = '3mPNep3p4vuiPJvBkCiU';\n\n  constructor(private firebase: FirebaseService) {}\n\n  ngOnInit(): void {\n    const entriesStream = this.firebase.getRecentEntriesWithStats(\n      50,\n      this.activeStat,\n    );\n    entriesStream.pipe(toArray()).subscribe((data) => {\n      this.entryData = data;\n    });\n  }\n}\n","<table mat-table [dataSource]=\"entryData\">\n  <ng-container matColumnDef=\"createdAt\">\n    <th mat-header-cell *matHeaderCellDef>Datetime</th>\n    <td mat-cell *matCellDef=\"let element\">{{element.entry.createdAt.toDate() | date: 'yyyy-MM-dd HH:mm'}}</td>\n  </ng-container>\n\n  <ng-container matColumnDef=\"pca1\">\n    <th mat-header-cell *matHeaderCellDef>Valence</th>\n    <td mat-cell *matCellDef=\"let element\">\n      <span *ngIf=\"element.stats; else elseSpan\">\n        {{element.stats.pca[0] | number:'1.2-2'}}\n      </span>\n      <ng-template #elseSpan>\n        -\n      </ng-template>\n    </td>\n  </ng-container>\n\n  <ng-container matColumnDef=\"activities\">\n    <th mat-header-cell *matHeaderCellDef>Activities</th>\n    <td mat-cell *matCellDef=\"let element\">\n      {{element.entry.activities?.join(\", \")}}\n    </td>\n  </ng-container>\n\n  <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n  <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\n</table>\n","import { Component, OnInit } from '@angular/core';\n\nimport { FormBuilder, FormGroup, FormControl } from '@angular/forms';\n\nimport { SettingsModel } from '../tagify/angular-tagify.component';\nimport { TagifyService } from '../tagify/angular-tagify.service';\n\nimport { FirebaseService, Timestamp } from '../services/firebase.service';\nimport { Router } from '@angular/router';\n\nexport interface Emotion {\n  id: string;\n  name: string;\n}\n\nexport interface Activity {\n  id: string;\n}\n\n@Component({\n  selector: 'app-form',\n  templateUrl: './form.component.html',\n  styleUrls: ['./form.component.css'],\n})\nexport class FormComponent implements OnInit {\n  entryForm!: FormGroup;\n  emotions: Emotion[] = [];\n  get emotionControls(): FormGroup {\n    return this.entryForm.get('emotions') as FormGroup;\n  }\n\n  tagifySettings: SettingsModel = {\n    autoComplete: { enabled: true, rightKey: true },\n    whitelist: [],\n  };\n  activitiesReady = false;\n  frequentActivities: { name: string; count: number }[];\n  frequentActivitiesReady = false;\n\n  validation_messages = {\n    name: [{ type: 'required', message: 'Name is required' }],\n  };\n\n  constructor(\n    private fb: FormBuilder,\n    private firebase: FirebaseService,\n    private router: Router,\n    private tagifyService: TagifyService,\n  ) {}\n\n  ngOnInit(): void {\n    const emotionGroup: { [key: string]: FormControl } = {};\n\n    // Generate a form group based on available emotions.\n    this.firebase.emotions.subscribe((emotions) => {\n      // Sort by name.\n      emotions.sort((a, b) => (a.payload.doc.id > b.payload.doc.id ? 1 : -1));\n\n      emotions.forEach((e) => {\n        const doc = e.payload.doc;\n\n        this.emotions.push(Object.assign({ id: doc.id }, doc.data()));\n        emotionGroup[doc.id] = this.fb.control('');\n      });\n\n      this.entryForm = this.fb.group({\n        activities: [],\n        emotions: this.fb.group(emotionGroup),\n      });\n    });\n\n    this.firebase.activities.subscribe((activitySnapshots) => {\n      this.tagifySettings.whitelist = activitySnapshots.map(\n        (a) => a.payload.doc.id,\n      );\n      this.activitiesReady = true;\n    });\n\n    this.firebase.getFrequentActivities().subscribe((acts) => {\n      this.frequentActivities = acts.map((a) => {\n        return { name: a.payload.doc.id, count: a.payload.doc.data().count };\n      });\n      this.frequentActivitiesReady = true;\n    });\n  }\n\n  onSubmit(value: { [key: string]: any }): void {\n    const activities = value.activities\n      ? value.activities.map((el) => el.value)\n      : [];\n\n    // Remove emotions which were not set.\n    const emotions = Object.entries(value.emotions)\n      .filter((item) => item[1] != '')\n      .reduce((obj, item) => {\n        obj[item[0]] = item[1];\n        return obj;\n      }, {});\n\n    const entry = {\n      activities: activities,\n      emotions: emotions,\n      createdAt: this.firebase.now(),\n    };\n    this.firebase.addEntry(entry).then(() => {\n      this.router.navigate(['/list']);\n    });\n  }\n\n  onPickActivity(event: MouseEvent, activity: string): void {\n    // Remove associated tag component\n    let el = event.srcElement as HTMLElement;\n    // find tagify root node for this tag\n    while (\n      !el.hasAttribute('class') ||\n      ` ${el.getAttribute('class')} `.indexOf(' tagify__tag ') == -1\n    ) {\n      el = el.parentNode as HTMLElement;\n    }\n    // One more up\n    el = el.parentNode as HTMLElement;\n    el.parentNode.removeChild(el);\n\n    this.tagifyService.addTags([activity]);\n  }\n}\n","<div class=\"container\">\n\n<form class=\"create-form\" *ngIf=\"entryForm\" [formGroup]=\"entryForm\" novalidate (ngSubmit)=\"onSubmit(entryForm.value)\">\n\n  <h3>Emotions</h3>\n  <div formGroupName=\"emotions\" *ngFor=\"let emotion of emotions\">\n    <div layout=\"row\">\n      <div layout-align=\"center center\">\n        <span class=\"md-body-1\">{{emotion.id}}</span>\n      </div>\n      <mat-slider md-discrete thumbLabel step=\"1\" min=\"1\" max=\"7\" tickInterval=\"1\" [formControlName]=\"emotion.id\"></mat-slider>\n    </div>\n  </div>\n\n  <h3>Activities</h3>\n  <tagify *ngIf=\"activitiesReady\" [settings]=\"tagifySettings\" formControlName=\"activities\"></tagify>\n  <div *ngIf=\"frequentActivitiesReady\" class=\"tagify activity-picker\">\n    <div *ngFor=\"let act of frequentActivities\">\n      <div (click)=\"onPickActivity($event, act.name)\" class=\"tagify__tag\">\n        <div>\n          <span class=\"tagify__tag-text\">{{act.name}}</span>\n        </div>\n      </div> <span class=\"activity-picker-count\">{{act.count}}</span>\n    </div>\n  </div>\n\n  <div class=\"row submit-button-container\">\n    <div class=\"col-md-4\">\n      <button mat-raised-button class=\"submit-button\" color=\"primary\" type=\"submit\" [disabled]=\"!entryForm.valid\">Create</button>\n    </div>\n  </div>\n\n</form>\n\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AngularFireAuthGuard } from '@angular/fire/auth-guard';\n\nimport { FormComponent } from './form/form.component';\nimport { ListComponent } from './list/list.component';\nimport { StatsComponent } from './stats/stats.component';\nimport { StatsDetailsComponent } from './stats-details/stats-details.component';\nimport { ExportComponent } from './export/export.component';\n\nconst routes: Routes = [\n  {\n    path: 'form',\n    component: FormComponent,\n    canActivate: [AngularFireAuthGuard],\n  },\n  { path: 'list', component: ListComponent },\n  { path: 'stats', component: StatsComponent },\n  { path: 'stats/:id', component: StatsDetailsComponent },\n  { path: 'export', component: ExportComponent },\n\n  { path: '', redirectTo: 'list', pathMatch: 'full' },\n];\n\n@NgModule({\n  declarations: [],\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}